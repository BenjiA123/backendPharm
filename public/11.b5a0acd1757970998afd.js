(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+s3p":function(t,e,n){"use strict";n.r(e),n.d(e,"DrugsModule",(function(){return A}));var r=n("ofXK"),a=n("tyNb"),i=n("YIDO"),c=n("fXoL"),s=n("uiWy"),o=n("PSNM"),u=n("XNiG"),d=n("AytR"),l=n("tk/3");const b=d.a.apiUrl+"/drug";let g=(()=>{class t{constructor(t){this.http=t,this.searchedDrugs=new u.a}searchDrugs(t){this.http.get(`${b}/search?q=${t}`).subscribe(t=>{this.drugs=t.document.data,this.searchedDrugs.next({drugs:[...this.drugs]})})}searchedDrugsListener(){return this.searchedDrugs.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(l.b))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("qXBG"),h=n("3Pt+"),p=n("kmnG"),f=n("qFsG");let y=(()=>{class t{constructor(t){this.searchService=t}submitSearch(t){this.searchService.searchDrugs(t.value.search)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(g))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-search-comp"]],decls:8,vars:0,consts:[[3,"submit"],["search","ngForm"],["appearance","outline"],["matInput","","name","search","placeholder","Search Drugs:","ngModel","","type","text"],["searchInput","ngModel"],["type","submit",1,"btn","btn--crimson"]],template:function(t,e){if(1&t){const t=c.Ub();c.Tb(0,"form",0,1),c.Zb("submit",(function(){c.Bc(t);const n=c.zc(1);return e.submitSearch(n)})),c.Tb(2,"mat-form-field",2),c.Ob(3,"input",3,4),c.Sb(),c.Tb(5,"button",5),c.Tb(6,"div"),c.Lc(7,"Search"),c.Sb(),c.Sb(),c.Sb()}},directives:[h.t,h.m,h.n,p.c,f.a,h.b,h.l,h.o],styles:["mat-form-field[_ngcontent-%COMP%]{width:35%;margin:3rem 1rem 0 10rem;height:3rem}form[_ngcontent-%COMP%]{margin-top:2.6rem;margin-bottom:0}.btn[_ngcontent-%COMP%]{width:20%;margin:auto}.btn[_ngcontent-%COMP%]:hover{transform:translateY(0);box-shadow:0}"]}),t})();var v=n("bTqV");const S=["drugsGrid"];function _(t,e){1&t&&c.Ob(0,"input",23)}function O(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",14),c.Tb(1,"form",15,16),c.Zb("submit",(function(){c.Bc(t);const e=c.zc(2);return c.dc().addToQueue(e)})),c.Ob(3,"input",17),c.Ob(4,"input",18),c.Jc(5,_,1,0,"input",19),c.Ob(6,"input",20),c.Tb(7,"a",21),c.Zb("click",(function(){c.Bc(t);const n=e.$implicit;return c.dc().deleteDrugInTrans(n._id)})),c.Tb(8,"mat-icon"),c.Lc(9,"delete"),c.Sb(),c.Sb(),c.Tb(10,"button",22),c.Lc(11,"Queue"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=e.$implicit,n=e.index;c.Ab(3),c.mc("ngModel",t),c.Ab(1),c.mc("ngModel",t.genericName),c.Ab(1),c.mc("ngIf",0===n)}}function T(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",24),c.Zb("click",(function(){return c.Bc(t),c.dc().createPendingTransaction()})),c.Lc(1," SEND TRANS\n"),c.Sb()}}function x(t,e){if(1&t){const t=c.Ub();c.Tb(0,"span",25),c.Tb(1,"button",26),c.Zb("click",(function(){c.Bc(t);const n=e.cell;return c.dc().getDrug(n.value)})),c.Lc(2," ADD "),c.Sb(),c.Sb()}}const w=[{path:"",component:(()=>{class t{constructor(t,e,n,r){this.drugService=t,this.appTransactionService=e,this.searchService=n,this.authService=r,this.transactionQueue=[],this.transactionData=[]}addToQueue(t){t.invalid?alert("Invalid Transaction"):(this.transactionData.length>0&&(this.transactionData=this.transactionData.filter(e=>e.drug.id!=t.value.drug._id)),this.transactionData.push({customer:t.value.customer,drug:t.value.drug,quantity:t.value.quantity}))}ngOnInit(){this.drugsSub=this.searchService.searchedDrugsListener().subscribe(t=>{this.drugs=t.drugs}),this.drugService.getAllDrugs().subscribe(t=>{this.drugs=t.data.document})}getDrug(t){this.drugService.getOneDrug(t).subscribe(e=>{const n=e.data.document;this.transactionQueue.length>0&&(this.transactionQueue=this.transactionQueue.filter(e=>e.id!=t)),this.transactionQueue.push(n)})}deleteDrugInTrans(t,e){this.transactionQueue=this.transactionQueue.filter(e=>e.id!=t),this.transactionData=this.transactionData.filter(e=>e.drug._id!=t)}createPendingTransaction(){let t,e=[],n=[{drug:void 0,quantity:void 0}];for(let a=0;a<this.transactionData.length;a++)e.push(this.transactionData[a].customer),n.push({drug:this.transactionData[a].drug._id,quantity:this.transactionData[a].quantity}),t=e[0];n.shift();const r={drugs:n,customerName:t,creator:this.authService.getCurrentUser()._id};this.appTransactionService.createPendingTransaction(r).subscribe(t=>alert("Transaction Created"))}ngOnDestroy(){this.drugsSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(s.a),c.Nb(o.a),c.Nb(g),c.Nb(m.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-drugs"]],viewQuery:function(t,e){var n;1&t&&c.Pc(S,!0,i.c),2&t&&c.yc(n=c.ac())&&(e.grid=n.first)},decls:21,vars:28,consts:[["class","transaction_drug",4,"ngFor","ngForOf"],["class","btn btn--crimson send_trans",3,"click",4,"ngIf"],[1,"screen_size_error"],["toolbarTitle","DRUGS","width","'80%'","id","drugsGrid | async","exportText","Export","exportExcelText","Export to Excel",1,"drugsGrid",3,"primaryKey","paging","perPage","allowFiltering","showToolbar","columnPinning","columnHiding","data","autoGenerate","rowEditable","exportExcel"],["drugsGrid",""],["width","25%","field","genericName","header","Generic Name ",3,"sortable"],["width","25%","field","brandName","header","Brand Name ",3,"sortable"],["width","10%","field","amount","header","Amount ",3,"sortable","filterable"],["width","10%","field","sellingPrice","header","Selling Price ",3,"hasSummary","sortable","filterable"],["width","10%","field","type","header","Type ",3,"sortable","filterable"],["width","10%","dataType","boolean","field","expired","header","Expired ",3,"sortable","filterable"],["width","10%","dataType","boolean","field","available","header","Available ",3,"sortable","filterable"],["field","_id","header"," ",3,"filterable"],["igxCell",""],[1,"transaction_drug"],[1,"queue__form",3,"submit"],["form","ngForm"],["type","hidden","name","drug",3,"ngModel"],["required","","name","genericName","type","text",1,"drug_name",3,"ngModel"],["required","","class","drug_name","name","customer","customer","","placeholder","Customer","type","text","ngModel","",4,"ngIf"],["required","","name","quantity","quantity","","placeholder","0","type","number","ngModel","","min","1"],["mat-button","","color","warn",1,"cancle",3,"click"],["type","submit",1,"btn","btn--white","send_queue"],["required","","name","customer","customer","","placeholder","Customer","type","text","ngModel","",1,"drug_name"],[1,"btn","btn--crimson","send_trans",3,"click"],["tabindex","0"],["mat-stroked-button","",3,"click"]],template:function(t,e){1&t&&(c.Ob(0,"app-search-comp"),c.Ob(1,"br"),c.Jc(2,O,12,3,"div",0),c.Jc(3,T,2,0,"div",1),c.Ob(4,"br"),c.Tb(5,"h5"),c.Lc(6,"DRUGS"),c.Sb(),c.Tb(7,"h4",2),c.Lc(8,"PLEASE USE A LAPTOP TO VIEW THIS PAGE\u2714\u2714\ud83d\ude01"),c.Sb(),c.Tb(9,"igx-grid",3,4),c.Ob(11,"igx-column",5),c.Ob(12,"igx-column",6),c.Ob(13,"igx-column",7),c.Ob(14,"igx-column",8),c.Ob(15,"igx-column",9),c.Ob(16,"igx-column",10),c.Ob(17,"igx-column",11),c.Tb(18,"igx-column",12),c.Jc(19,x,3,0,"ng-template",13),c.Sb(),c.Sb(),c.Ob(20,"br")),2&t&&(c.Ab(2),c.mc("ngForOf",e.transactionQueue),c.Ab(1),c.mc("ngIf",e.transactionQueue.length>0),c.Ab(6),c.mc("primaryKey","_id")("paging",!0)("perPage",10)("allowFiltering",!0)("showToolbar",!0)("columnPinning",!0)("columnHiding",!0)("data",e.drugs)("autoGenerate",!1)("rowEditable",!1)("exportExcel",!0)("allowFiltering",!0),c.Ab(2),c.mc("sortable",!0),c.Ab(1),c.mc("sortable",!0),c.Ab(1),c.mc("sortable",!1)("filterable",!1),c.Ab(1),c.mc("hasSummary",!0)("sortable",!0)("filterable",!1),c.Ab(1),c.mc("sortable",!0)("filterable",!1),c.Ab(1),c.mc("sortable",!1)("filterable",!1),c.Ab(1),c.mc("sortable",!1)("filterable",!1),c.Ab(1),c.mc("filterable",!1))},directives:[y,r.l,r.m,i.c,i.b,i.a,h.t,h.m,h.n,h.b,h.l,h.o,h.r,h.p,v.a,v.b],styles:["h5[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.transaction_drug[_ngcontent-%COMP%]{text-align:center;margin:.7rem 2rem;border:1rem;padding:.6rem 0;border-radius:2px;color:#dc143c;background-color:#ccc}.cancle[_ngcontent-%COMP%]{float:right;margin:auto}input[_ngcontent-%COMP%]{height:1.7rem;width:5rem;margin:-2rem;border-style:none;padding:0;border-radius:1rem;text-align:center;position:relative}.design[_ngcontent-%COMP%]{height:1rem}.send_trans[_ngcontent-%COMP%]{width:15%;position:absolute;padding:1rem 0;text-align:center}.send_queue[_ngcontent-%COMP%]{float:right;margin:auto 1rem;padding:.4rem;width:10%}.drug_name[_ngcontent-%COMP%]{float:left;margin:auto 1rem}@media screen and (max-width:500px){.queue__form[_ngcontent-%COMP%], .send_trans[_ngcontent-%COMP%], .transaction_drug[_ngcontent-%COMP%], app-search-comp[_ngcontent-%COMP%]{visibility:hidden}}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(w)],a.g]}),t})();var P=n("rhD1");let M=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[r.b,P.a]]}),t})(),A=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[r.b,i.d,D,M,P.a],M]}),t})()}}]);
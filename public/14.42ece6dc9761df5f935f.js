(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+s3p":function(e,t,n){"use strict";n.r(t),n.d(t,"DrugsModule",(function(){return O}));var a=n("ofXK"),r=n("tyNb"),i=n("fXoL"),c=n("uiWy"),s=n("Wp6s");let o=(()=>{class e{constructor(e,t){this.drugService=e,this.route=t}ngOnInit(){this.drugService.getOneDrug(this.route.snapshot.params.id).subscribe(e=>{this.singleDrug=e.data.document})}}return e.\u0275fac=function(t){return new(t||e)(i.Nb(c.a),i.Nb(r.a))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-drug-detail"]],decls:26,vars:15,consts:[[1,"header"],[1,"card"]],template:function(e,t){1&e&&(i.Tb(0,"h4",0),i.Nc(1,"DRUG DETAIL"),i.Sb(),i.Tb(2,"mat-card",1),i.Tb(3,"mat-card-header"),i.Tb(4,"mat-card-title"),i.Tb(5,"strong"),i.Nc(6,"Generic Name:"),i.Sb(),i.Nc(7),i.Sb(),i.Tb(8,"mat-card-subtitle"),i.Nc(9),i.Sb(),i.Sb(),i.Tb(10,"mat-card-content"),i.Nc(11),i.Sb(),i.Tb(12,"mat-card-content"),i.Nc(13),i.Sb(),i.Tb(14,"mat-card-content"),i.Nc(15),i.Sb(),i.Tb(16,"mat-card-content"),i.Nc(17),i.ec(18,"date"),i.Sb(),i.Tb(19,"mat-card-content"),i.Nc(20),i.ec(21,"date"),i.Sb(),i.Tb(22,"mat-card-content"),i.Nc(23),i.Sb(),i.Tb(24,"mat-card-content"),i.Nc(25),i.Sb(),i.Sb()),2&e&&(i.Ab(7),i.Pc(" ",null==t.singleDrug?null:t.singleDrug.genericName,""),i.Ab(2),i.Pc("Brand Name: ",null==t.singleDrug?null:t.singleDrug.brandName,""),i.Ab(2),i.Pc("Type: ",null==t.singleDrug?null:t.singleDrug.type,""),i.Ab(2),i.Pc("Selling Price: ",null==t.singleDrug?null:t.singleDrug.sellingPrice,""),i.Ab(2),i.Pc("Cost Price: ",null==t.singleDrug?null:t.singleDrug.costPrice,""),i.Ab(2),i.Pc("Purchase Date: ",i.gc(18,9,null==t.singleDrug?null:t.singleDrug.purchaseDate,"fullDate"),""),i.Ab(3),i.Pc("Expiry Date: ",i.gc(21,12,null==t.singleDrug?null:t.singleDrug.expiryDate,"fullDate"),""),i.Ab(3),i.Pc("Amount: ",null==t.singleDrug?null:t.singleDrug.amount,""),i.Ab(2),i.Pc("Description: ",null==t.singleDrug?null:t.singleDrug.description,""))},directives:[s.a,s.c,s.f,s.e,s.b],pipes:[a.e],styles:[".card[_ngcontent-%COMP%]{width:70%;margin:3% 15%;color:#fff;background-color:#dc143c}.header[_ngcontent-%COMP%]{text-align:center;color:#dc143c}"]}),e})();var l=n("YIDO"),u=n("EA+0"),d=n("PSNM"),g=n("to4i"),b=n("qXBG"),m=n("0IaG"),h=n("tq2C"),p=n("3Pt+"),f=n("bTqV");const T=["drugsGrid"];function D(e,t){1&e&&i.Ob(0,"input",17)}function S(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",8),i.Tb(1,"form",9,10),i.Zb("submit",(function(){i.Dc(e);const t=i.Ac(2);return i.dc().addToQueue(t)})),i.Ob(3,"input",11),i.Ob(4,"input",12),i.Lc(5,D,1,0,"input",13),i.Ob(6,"input",14),i.Tb(7,"a",15),i.Zb("click",(function(){i.Dc(e);const n=t.$implicit;return i.dc().deleteDrugInTrans(n._id)})),i.Tb(8,"mat-icon"),i.Nc(9,"delete_forever"),i.Sb(),i.Sb(),i.Tb(10,"button",16),i.Tb(11,"mat-icon"),i.Nc(12,"done_outline"),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=t.$implicit,n=t.index;i.Ab(3),i.mc("ngModel",e),i.Ab(1),i.mc("ngModel",e.genericName),i.Ab(1),i.mc("ngIf",0===n)}}function y(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",18),i.Zb("click",(function(){return i.Dc(e),i.dc().createPendingTransaction()})),i.Nc(1," SEND TRANS\n"),i.Sb()}}function _(e,t){if(1&e&&i.Ob(0,"igx-column",19),2&e){const e=t.$implicit;i.mc("sortable",e.sortable)("filterable",e.filterable)("hasSummary",e.hasSummary)("field",e.field)("header",e.header)("dataType",e.dataType)("editable",!0)}}function P(e,t){if(1&e){const e=i.Ub();i.Tb(0,"span",20),i.Tb(1,"button",21),i.Zb("click",(function(){i.Dc(e);const n=t.cell;return i.dc().getDrug(n.value)})),i.Nc(2," ADD "),i.Sb(),i.Sb()}}function N(e,t){if(1&e&&(i.Tb(0,"span",20),i.Tb(1,"button",22),i.Nc(2," DETAILS "),i.Sb(),i.Sb()),2&e){const e=t.cell;i.Ab(1),i.oc("routerLink","detail/",e.value,"")}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,a,r){this.drugService=e,this.appTransactionService=t,this.searchService=n,this.authService=a,this._dialog=r,this.transactionQueue=[],this.transactionData=[],this.idxColumnData=[{dataType:"string",width:"25%",hasSummary:!1,field:"genericName",sortable:!0,header:"Generic Name ",filterable:!0},{dataType:"string",width:"25%",hasSummary:!1,field:"brandName",sortable:!0,header:"Brand Name ",filterable:!0},{dataType:"number",width:"10%",hasSummary:!1,field:"amount",sortable:!1,header:"Amount ",filterable:!1},{dataType:"number",width:"10%",hasSummary:!0,field:"sellingPrice",sortable:!1,header:"Selling Price ",filterable:!1},{dataType:"string",width:"10%",hasSummary:!1,field:"type",sortable:!0,header:"Type ",filterable:!1},{dataType:"boolean",width:"25%",hasSummary:!1,field:"expired",sortable:!0,header:"Expired ",filterable:!1},{dataType:"boolean",width:"25%",hasSummary:!1,field:"Available",sortable:!0,header:"Available ",filterable:!1}]}addToQueue(e){e.invalid?this._dialog.open(u.a,{data:{message:"Invalid Transaction"}}):(this.transactionData.length>0&&(this.transactionData=this.transactionData.filter(t=>t.drug.id!=e.value.drug._id)),this.transactionData.push({customer:e.value.customer,drug:e.value.drug,quantity:e.value.quantity}))}ngOnInit(){this.drugsSub=this.searchService.searchedDrugsListener().subscribe(e=>{this.drugs=e.drugs}),this.drugService.getAllDrugs().subscribe(e=>{this.drugs=e.data.document})}getDrug(e){this.drugService.getOneDrug(e).subscribe(t=>{const n=t.data.document;this.transactionQueue.length>0&&(this.transactionQueue=this.transactionQueue.filter(t=>t.id!=e)),this.transactionQueue.push(n)})}deleteDrugInTrans(e,t){this.transactionQueue=this.transactionQueue.filter(t=>t.id!=e),this.transactionData=this.transactionData.filter(t=>t.drug._id!=e)}createPendingTransaction(){let e,t=[],n=[{drug:void 0,quantity:void 0}];for(let r=0;r<this.transactionData.length;r++)t.push(this.transactionData[r].customer),n.push({drug:this.transactionData[r].drug._id,quantity:this.transactionData[r].quantity}),e=t[0];n.shift();const a={drugs:n,customerName:e,creator:this.authService.getCurrentUser()._id};this.appTransactionService.createPendingTransaction(a).subscribe(e=>{this._dialog.open(u.a,{data:{message:"Transaction Created"}}),this.transactionQueue=[],this.transactionData=[]})}ngOnDestroy(){this.drugsSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Nb(c.a),i.Nb(d.a),i.Nb(g.a),i.Nb(b.a),i.Nb(m.b))},e.\u0275cmp=i.Hb({type:e,selectors:[["app-drugs"]],viewQuery:function(e,t){var n;1&e&&i.Rc(T,!0,l.c),2&e&&i.zc(n=i.ac())&&(t.grid=n.first)},decls:15,vars:17,consts:[["class","transaction_drug",4,"ngFor","ngForOf"],["class","btn btn--crimson send_trans",3,"click",4,"ngIf"],[1,"screen_size_error"],["toolbarTitle","DRUGS","width","'80%'","id","drugsGrid | async","exportText","Export","exportExcelText","Export to Excel",1,"drugsGrid",3,"primaryKey","paging","perPage","allowFiltering","showToolbar","columnPinning","columnHiding","data","autoGenerate","rowEditable","exportExcel"],["drugsGrid",""],[3,"sortable","filterable","hasSummary","field","header","dataType","editable",4,"ngFor","ngForOf"],["field","_id","header"," ",3,"filterable"],["igxCell",""],[1,"transaction_drug"],[1,"queue__form",3,"submit"],["form","ngForm"],["type","hidden","name","drug",3,"ngModel"],["required","","name","genericName","type","text",1,"drug_name",3,"ngModel"],["required","","class","drug_name","name","customer","customer","","placeholder","Customer","type","text","ngModel","",4,"ngIf"],["required","","name","quantity","quantity","","placeholder","0","type","number","ngModel","","min","1"],["mat-button","","color","warn",1,"cancle",3,"click"],["type","submit",1,"btn","btn--white","send_queue"],["required","","name","customer","customer","","placeholder","Customer","type","text","ngModel","",1,"drug_name"],[1,"btn","btn--crimson","send_trans",3,"click"],[3,"sortable","filterable","hasSummary","field","header","dataType","editable"],["tabindex","0"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",3,"routerLink"]],template:function(e,t){1&e&&(i.Ob(0,"app-search-comp"),i.Lc(1,S,13,3,"div",0),i.Lc(2,y,2,0,"div",1),i.Tb(3,"h5"),i.Nc(4,"DRUGS"),i.Sb(),i.Tb(5,"h4",2),i.Nc(6,"PLEASE USE A LAPTOP TO VIEW THIS PAGE\u2714\u2714\ud83d\ude01"),i.Sb(),i.Tb(7,"igx-grid",3,4),i.Lc(9,_,1,7,"igx-column",5),i.Tb(10,"igx-column",6),i.Lc(11,P,3,0,"ng-template",7),i.Sb(),i.Tb(12,"igx-column",6),i.Lc(13,N,3,1,"ng-template",7),i.Sb(),i.Sb(),i.Ob(14,"br")),2&e&&(i.Ab(1),i.mc("ngForOf",t.transactionQueue),i.Ab(1),i.mc("ngIf",t.transactionQueue.length>0),i.Ab(5),i.mc("primaryKey","_id")("paging",!0)("perPage",10)("allowFiltering",!0)("showToolbar",!0)("columnPinning",!0)("columnHiding",!0)("data",t.drugs)("autoGenerate",!1)("rowEditable",!1)("exportExcel",!0)("allowFiltering",!0),i.Ab(2),i.mc("ngForOf",t.idxColumnData),i.Ab(1),i.mc("filterable",!1),i.Ab(2),i.mc("filterable",!1))},directives:[h.a,a.m,a.n,l.c,l.b,l.a,p.t,p.m,p.n,p.b,p.l,p.o,p.r,p.p,f.a,f.b,r.d],styles:["h5[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.transaction_drug[_ngcontent-%COMP%]{text-align:center;margin:.7rem 2rem;border:1rem;padding:.6rem 0;border-radius:2px;color:#dc143c;background-color:#ccc}.cancle[_ngcontent-%COMP%]{float:right;margin:auto}input[_ngcontent-%COMP%]{height:1.7rem;width:5rem;margin:-2rem;border-style:none;padding:0;border-radius:1rem;text-align:center;position:relative}.design[_ngcontent-%COMP%]{height:1rem}.send_trans[_ngcontent-%COMP%]{width:15%;position:absolute;padding:1rem 0;text-align:center}.send_queue[_ngcontent-%COMP%]{float:right;margin:auto 1rem;padding:.4rem;width:10%}.drug_name[_ngcontent-%COMP%]{float:left;margin:auto 1rem}@media screen and (max-width:500px){.queue__form[_ngcontent-%COMP%], .send_trans[_ngcontent-%COMP%], .transaction_drug[_ngcontent-%COMP%], app-search-comp[_ngcontent-%COMP%]{visibility:hidden}}"]}),e})()},{path:"detail/:id",component:o}];let x=(()=>{class e{}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(v)],r.g]}),e})();var A=n("rhD1"),w=n("RmqX");let O=(()=>{class e{}return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[a.c,l.d,x,s.d,w.a,A.a]]}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+s3p":function(e,t,n){"use strict";n.r(t),n.d(t,"DrugsModule",(function(){return M}));var r=n("ofXK"),a=n("tyNb"),i=n("fXoL"),c=n("uiWy"),s=n("Wp6s");let o=(()=>{class e{constructor(e,t){this.drugService=e,this.route=t}ngOnInit(){this.drugService.getOneDrug(this.route.snapshot.params.id).subscribe(e=>{this.singleDrug=e.data.document})}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(c.a),i.Ob(a.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-drug-detail"]],decls:26,vars:15,consts:[[1,"header"],[1,"card"]],template:function(e,t){1&e&&(i.Ub(0,"h4",0),i.Oc(1,"DRUG DETAIL"),i.Tb(),i.Ub(2,"mat-card",1),i.Ub(3,"mat-card-header"),i.Ub(4,"mat-card-title"),i.Ub(5,"strong"),i.Oc(6,"Generic Name:"),i.Tb(),i.Oc(7),i.Tb(),i.Ub(8,"mat-card-subtitle"),i.Oc(9),i.Tb(),i.Tb(),i.Ub(10,"mat-card-content"),i.Oc(11),i.Tb(),i.Ub(12,"mat-card-content"),i.Oc(13),i.Tb(),i.Ub(14,"mat-card-content"),i.Oc(15),i.Tb(),i.Ub(16,"mat-card-content"),i.Oc(17),i.fc(18,"date"),i.Tb(),i.Ub(19,"mat-card-content"),i.Oc(20),i.fc(21,"date"),i.Tb(),i.Ub(22,"mat-card-content"),i.Oc(23),i.Tb(),i.Ub(24,"mat-card-content"),i.Oc(25),i.Tb(),i.Tb()),2&e&&(i.Bb(7),i.Qc(" ",null==t.singleDrug?null:t.singleDrug.genericName,""),i.Bb(2),i.Qc("Brand Name: ",null==t.singleDrug?null:t.singleDrug.brandName,""),i.Bb(2),i.Qc("Type: ",null==t.singleDrug?null:t.singleDrug.type,""),i.Bb(2),i.Qc("Selling Price: ",null==t.singleDrug?null:t.singleDrug.sellingPrice,""),i.Bb(2),i.Qc("Cost Price: ",null==t.singleDrug?null:t.singleDrug.costPrice,""),i.Bb(2),i.Qc("Purchase Date: ",i.hc(18,9,null==t.singleDrug?null:t.singleDrug.purchaseDate,"fullDate"),""),i.Bb(3),i.Qc("Expiry Date: ",i.hc(21,12,null==t.singleDrug?null:t.singleDrug.expiryDate,"fullDate"),""),i.Bb(3),i.Qc("Amount: ",null==t.singleDrug?null:t.singleDrug.amount,""),i.Bb(2),i.Qc("Description: ",null==t.singleDrug?null:t.singleDrug.description,""))},directives:[s.a,s.c,s.f,s.e,s.b],pipes:[r.e],styles:[".card[_ngcontent-%COMP%]{width:70%;margin:3% 15%;color:#fff;background-color:#dc143c}.header[_ngcontent-%COMP%]{text-align:center;color:#dc143c}"]}),e})();var u=n("YIDO"),l=n("EA+0"),d=n("kt0X"),b=n("PSNM"),g=n("to4i"),m=n("0IaG"),h=n("tq2C"),p=n("3Pt+"),f=n("bTqV");const T=["drugsGrid"];function y(e,t){1&e&&i.Pb(0,"input",17)}function D(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",8),i.Ub(1,"form",9,10),i.ac("submit",(function(){i.Ec(e);const t=i.Bc(2);return i.ec().addToQueue(t)})),i.Pb(3,"input",11),i.Pb(4,"input",12),i.Mc(5,y,1,0,"input",13),i.Pb(6,"input",14),i.Ub(7,"a",15),i.ac("click",(function(){i.Ec(e);const n=t.$implicit;return i.ec().deleteDrugInTrans(n._id)})),i.Ub(8,"mat-icon"),i.Oc(9,"delete_forever"),i.Tb(),i.Tb(),i.Ub(10,"button",16),i.Ub(11,"mat-icon"),i.Oc(12,"done_outline"),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=t.$implicit,n=t.index;i.Bb(3),i.nc("ngModel",e),i.Bb(1),i.nc("ngModel",e.genericName),i.Bb(1),i.nc("ngIf",0===n)}}function O(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",18),i.ac("click",(function(){return i.Ec(e),i.ec().createPendingTransaction()})),i.Oc(1," SEND TRANS\n"),i.Tb()}}function _(e,t){if(1&e&&i.Pb(0,"igx-column",19),2&e){const e=t.$implicit;i.nc("sortable",e.sortable)("filterable",e.filterable)("hasSummary",e.hasSummary)("field",e.field)("header",e.header)("dataType",e.dataType)("editable",!0)}}function P(e,t){if(1&e){const e=i.Vb();i.Ub(0,"span",20),i.Ub(1,"button",21),i.ac("click",(function(){i.Ec(e);const n=t.cell;return i.ec().getDrug(n.value)})),i.Oc(2," ADD "),i.Tb(),i.Tb()}}function v(e,t){if(1&e&&(i.Ub(0,"span",20),i.Ub(1,"button",22),i.Oc(2," DETAILS "),i.Tb(),i.Tb()),2&e){const e=t.cell;i.Bb(1),i.pc("routerLink","detail/",e.value,"")}}const x=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a){this.store=e,this.drugService=t,this.appTransactionService=n,this.searchService=r,this._dialog=a,this.transactionQueue=[],this.transactionData=[],this.idxColumnData=[{dataType:"string",width:"25%",hasSummary:!1,field:"genericName",sortable:!0,header:"Generic Name ",filterable:!0},{dataType:"string",width:"25%",hasSummary:!1,field:"brandName",sortable:!0,header:"Brand Name ",filterable:!0},{dataType:"number",width:"10%",hasSummary:!1,field:"amount",sortable:!1,header:"Amount ",filterable:!1},{dataType:"number",width:"10%",hasSummary:!0,field:"sellingPrice",sortable:!1,header:"Selling Price ",filterable:!1},{dataType:"string",width:"10%",hasSummary:!1,field:"type",sortable:!0,header:"Type ",filterable:!1},{dataType:"boolean",width:"25%",hasSummary:!1,field:"expired",sortable:!0,header:"Expired ",filterable:!1},{dataType:"boolean",width:"25%",hasSummary:!1,field:"available",sortable:!0,header:"Available ",filterable:!1}]}addToQueue(e){e.invalid?this._dialog.open(l.a,{data:{message:"Invalid Transaction"}}):(this.transactionData.length>0&&(this.transactionData=this.transactionData.filter(t=>t.drug.id!=e.value.drug._id)),this.transactionData.push({customer:e.value.customer,drug:e.value.drug,quantity:e.value.quantity}))}ngOnInit(){this.store.select("AuthState").subscribe(e=>{this.currentUser=e.currentUser}),this.drugsSub=this.searchService.searchedDrugsListener().subscribe(e=>{this.drugs=e.drugs}),this.drugService.getAllDrugs().subscribe(e=>{this.drugs=e.data.document})}getDrug(e){this.drugService.getOneDrug(e).subscribe(t=>{const n=t.data.document;this.transactionQueue.length>0&&(this.transactionQueue=this.transactionQueue.filter(t=>t.id!=e)),this.transactionQueue.push(n)})}deleteDrugInTrans(e,t){this.transactionQueue=this.transactionQueue.filter(t=>t.id!=e),this.transactionData=this.transactionData.filter(t=>t.drug._id!=e)}createPendingTransaction(){let e,t=[],n=[{drug:void 0,quantity:void 0}];for(let r=0;r<this.transactionData.length;r++)t.push(this.transactionData[r].customer),n.push({drug:this.transactionData[r].drug._id,quantity:this.transactionData[r].quantity}),e=t[0];n.shift(),this.appTransactionService.createPendingTransaction({drugs:n,customerName:e,creator:this.currentUser._id}).subscribe(e=>{this._dialog.open(l.a,{data:{message:"Transaction Created"}}),this.transactionQueue=[],this.transactionData=[]})}ngOnDestroy(){this.drugsSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(d.h),i.Ob(c.a),i.Ob(b.a),i.Ob(g.a),i.Ob(m.b))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-drugs"]],viewQuery:function(e,t){var n;1&e&&i.Sc(T,!0,u.c),2&e&&i.Ac(n=i.bc())&&(t.grid=n.first)},decls:17,vars:17,consts:[["class","transaction_drug",4,"ngFor","ngForOf"],["class","btn btn--crimson send_trans",3,"click",4,"ngIf"],[1,"screen_size_error"],["toolbarTitle","DRUGS","width","'80%'","id","drugsGrid | async","exportText","Export","exportExcelText","Export to Excel",1,"drugsGrid",3,"primaryKey","paging","perPage","allowFiltering","showToolbar","columnPinning","columnHiding","data","autoGenerate","rowEditable","exportExcel"],["drugsGrid",""],[3,"sortable","filterable","hasSummary","field","header","dataType","editable",4,"ngFor","ngForOf"],["field","_id","header"," ",3,"filterable"],["igxCell",""],[1,"transaction_drug"],[1,"queue__form",3,"submit"],["form","ngForm"],["type","hidden","name","drug",3,"ngModel"],["required","","name","genericName","type","text",1,"drug_name",3,"ngModel"],["required","","class","drug_name","name","customer","customer","","placeholder","Customer","type","text","ngModel","",4,"ngIf"],["required","","name","quantity","quantity","","placeholder","0","type","number","ngModel","","min","1"],["mat-button","","color","warn",1,"cancle",3,"click"],["type","submit",1,"btn","btn--white","send_queue"],["required","","name","customer","customer","","placeholder","Customer","type","text","ngModel","",1,"drug_name"],[1,"btn","btn--crimson","send_trans",3,"click"],[3,"sortable","filterable","hasSummary","field","header","dataType","editable"],["tabindex","0"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",3,"routerLink"]],template:function(e,t){1&e&&(i.Pb(0,"br"),i.Pb(1,"br"),i.Pb(2,"app-search-comp"),i.Mc(3,D,13,3,"div",0),i.Mc(4,O,2,0,"div",1),i.Ub(5,"h5"),i.Oc(6,"DRUGS"),i.Tb(),i.Ub(7,"h4",2),i.Oc(8,"PLEASE USE A LAPTOP TO VIEW THIS PAGE\u2714\u2714\ud83d\ude01"),i.Tb(),i.Ub(9,"igx-grid",3,4),i.Mc(11,_,1,7,"igx-column",5),i.Ub(12,"igx-column",6),i.Mc(13,P,3,0,"ng-template",7),i.Tb(),i.Ub(14,"igx-column",6),i.Mc(15,v,3,1,"ng-template",7),i.Tb(),i.Tb(),i.Pb(16,"br")),2&e&&(i.Bb(3),i.nc("ngForOf",t.transactionQueue),i.Bb(1),i.nc("ngIf",t.transactionQueue.length>0),i.Bb(5),i.nc("primaryKey","_id")("paging",!0)("perPage",10)("allowFiltering",!0)("showToolbar",!0)("columnPinning",!0)("columnHiding",!0)("data",t.drugs)("autoGenerate",!1)("rowEditable",!1)("exportExcel",!0)("allowFiltering",!0),i.Bb(2),i.nc("ngForOf",t.idxColumnData),i.Bb(1),i.nc("filterable",!1),i.Bb(2),i.nc("filterable",!1))},directives:[h.a,r.m,r.n,u.c,u.b,u.a,p.t,p.m,p.n,p.b,p.l,p.o,p.r,p.p,f.a,f.b,a.d],styles:["h5[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.transaction_drug[_ngcontent-%COMP%]{text-align:center;margin:.7rem 2rem;border:1rem;padding:.6rem 0;border-radius:2px;color:#dc143c;background-color:#ccc}.cancle[_ngcontent-%COMP%]{float:right;margin:auto}input[_ngcontent-%COMP%]{height:1.7rem;width:5rem;margin:-2rem;border-style:none;padding:0;border-radius:1rem;text-align:center;position:relative}.design[_ngcontent-%COMP%]{height:1rem}.send_trans[_ngcontent-%COMP%]{width:15%;position:absolute;padding:1rem 0;text-align:center}.send_queue[_ngcontent-%COMP%]{float:right;margin:auto 1rem;padding:.4rem;width:10%}.drug_name[_ngcontent-%COMP%]{float:left;margin:auto 1rem}@media screen and (max-width:500px){.queue__form[_ngcontent-%COMP%], .send_trans[_ngcontent-%COMP%], .transaction_drug[_ngcontent-%COMP%], app-search-comp[_ngcontent-%COMP%]{visibility:hidden}}"]}),e})()},{path:"detail/:id",component:o}];let U=(()=>{class e{}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(x)],a.g]}),e})();var S=n("rhD1"),w=n("RmqX");let M=(()=>{class e{}return e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({factory:function(t){return new(t||e)},imports:[[r.c,u.d,U,s.d,w.a,S.a]]}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4TXq":function(e,t,r){"use strict";r.r(t),r.d(t,"CreateModule",(function(){return I}));var c=r("ofXK"),n=r("tyNb"),a=r("mrSG"),i=r("AytR"),o=r("jifJ"),d=r("EA+0"),l=r("fXoL"),u=r("uiWy"),s=r("Z9lu"),m=r("0IaG"),g=r("3Pt+"),b=r("kmnG"),_=r("d3UM"),p=r("FKr1"),f=r("qFsG"),h=r("/1cH");function S(e,t){if(1&e&&(l.Tb(0,"mat-form-field",18),l.Tb(1,"mat-label"),l.Nc(2),l.Sb(),l.Ob(3,"input",19),l.Sb()),2&e){const e=t.$implicit;l.Ab(2),l.Pc("",e.label,":"),l.Ab(1),l.nc("name",e.name),l.nc("placeholder",e.placeholder),l.nc("type",e.type)}}function y(e,t){if(1&e&&(l.Tb(0,"mat-option",20),l.Nc(1),l.Sb()),2&e){const e=t.$implicit;l.mc("value",e._id),l.Ab(1),l.Oc(e.name)}}function D(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",1),l.Tb(1,"div",2),l.Nc(2,"DRUG"),l.Sb(),l.Tb(3,"div",3),l.Tb(4,"div",4),l.Tb(5,"form",5,6),l.Zb("submit",(function(){l.Dc(e);const t=l.Ac(6);return l.dc().createDrug(t)})),l.Lc(7,S,4,4,"mat-form-field",7),l.Tb(8,"mat-form-field",8),l.Tb(9,"mat-label"),l.Nc(10,"Type:"),l.Sb(),l.Tb(11,"mat-select",9),l.Tb(12,"mat-option",10),l.Nc(13,"Injectible"),l.Sb(),l.Tb(14,"mat-option",11),l.Nc(15,"Tablet"),l.Sb(),l.Tb(16,"mat-option",12),l.Nc(17,"Suspension"),l.Sb(),l.Sb(),l.Sb(),l.Tb(18,"mat-form-field",13),l.Zb("click",(function(){return l.Dc(e),l.dc().getAllSources()})),l.Tb(19,"mat-label"),l.Nc(20,"Source:"),l.Sb(),l.Tb(21,"mat-select",14),l.Lc(22,y,2,2,"mat-option",15),l.Sb(),l.Sb(),l.Tb(23,"button",16),l.Nc(24,"Drug"),l.Sb(),l.Sb(),l.Sb(),l.Ob(25,"div",17),l.Sb(),l.Sb()}if(2&e){const e=l.dc();l.Ab(7),l.mc("ngForOf",e.createDrugFields),l.Ab(15),l.mc("ngForOf",e.sources)}}function v(e,t){if(1&e&&(l.Tb(0,"mat-form-field",18),l.Tb(1,"mat-label"),l.Nc(2),l.Sb(),l.Ob(3,"input",25),l.Sb()),2&e){const e=t.$implicit;l.Ab(2),l.Pc("",e.label,":"),l.Ab(1),l.nc("name",e.name),l.nc("placeholder",e.placeholder),l.nc("type",e.type)}}function O(e,t){if(1&e){const e=l.Ub();l.Tb(0,"mat-option",26),l.Zb("click",(function(){l.Dc(e);const r=t.$implicit;return l.dc(2).selectDrugs(r._id,r.genericName)})),l.Nc(1),l.Sb()}if(2&e){const e=t.$implicit;l.mc("value",e.genericName),l.Ab(1),l.Pc(" ",e.genericName," ")}}function P(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",32),l.Ob(1,"input",33),l.Nc(2),l.ec(3,"slice"),l.Ob(4,"input",34),l.Tb(5,"button",35),l.Nc(6,"+"),l.Sb(),l.Tb(7,"button",36),l.Zb("click",(function(){l.Dc(e);const r=t.$implicit;return l.dc(3).unSelectDrug(r.drugId)})),l.Nc(8," X "),l.Sb(),l.Sb()}if(2&e){const e=t.$implicit;l.Ab(1),l.mc("ngModel",e),l.Ab(1),l.Pc(" ",l.hc(3,2,e.genericName,0,9),"... ")}}function T(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",27),l.Tb(1,"h5",28),l.Nc(2,"Drugs"),l.Sb(),l.Tb(3,"form",29,30),l.Zb("submit",(function(){l.Dc(e);const t=l.Ac(4);return l.dc(2).addToQueue(t)})),l.Lc(5,P,9,6,"div",31),l.Sb(),l.Sb()}if(2&e){const e=l.dc(2);l.Ab(5),l.mc("ngForOf",e.selectedDrugsArray)}}function w(e,t){if(1&e){const e=l.Ub();l.Tb(0,"div",1),l.Tb(1,"div",2),l.Nc(2,"SOURCES"),l.Sb(),l.Tb(3,"div",3),l.Tb(4,"div",4),l.Tb(5,"form",5,6),l.Zb("submit",(function(){l.Dc(e);const t=l.Ac(6);return l.dc().createSource(t)})),l.Lc(7,v,4,4,"mat-form-field",7),l.Tb(8,"mat-form-field"),l.Tb(9,"input",21),l.Zb("focus",(function(){return l.Dc(e),l.dc().searchField("")})),l.Sb(),l.Tb(10,"mat-autocomplete",null,22),l.Lc(12,O,2,2,"mat-option",23),l.Sb(),l.Sb(),l.Ob(13,"br"),l.Ob(14,"br"),l.Tb(15,"button",16),l.Nc(16,"Source"),l.Sb(),l.Sb(),l.Sb(),l.Ob(17,"div",17),l.Lc(18,T,6,1,"div",24),l.Sb(),l.Sb()}if(2&e){const e=l.Ac(11),t=l.dc();l.Ab(7),l.mc("ngForOf",t.createSourceData),l.Ab(2),l.mc("matAutocomplete",e),l.Ab(3),l.mc("ngForOf",t.drugsForSource),l.Ab(6),l.mc("ngIf",t.selectedDrugsArray.length>0)}}const N=Object(o.io)(i.a.baseUrl);let A=(()=>{class e{constructor(e,t,r,c){this.route=e,this.drugsService=t,this.sourceService=r,this._dialog=c,this.createDrugFields=[{name:"genericName",placeholder:"Generic Name",type:"string",label:"Generic Name"},{name:"brandName",placeholder:"Brand Name",type:"string",label:"Brand Name"},{name:"sellingPrice",placeholder:"Selling Price",type:"number",label:"Sellong Price"},{name:"costPrice",placeholder:"Cost Price",type:"number",label:"Cost Price"},{name:"expiryDate",placeholder:"Expiry Date",type:"date",label:"Expiry Date"},{name:"amount",placeholder:"Amount",type:"number",label:"Amount"}],this.createSourceData=[{name:"name",placeholder:"Name",type:"string",label:"Name"},{name:"address",placeholder:"Address",type:"textarea",label:"Address"},{name:"purchaseDate",placeholder:"Purchase Date",type:"date",label:"Purchase Date"}],this.drugsForSource=[],this.selectedDrugsQueue=[],this.selectedDrugsArray=[]}addToQueue(e){e.invalid?this._dialog.open(d.a,{data:{message:"Invalid Drug"}}):(this.selectedDrugsQueue.length>0&&(this.selectedDrugsQueue=this.selectedDrugsQueue.filter(t=>t.drugId!=e.form.value.drug.drugId)),this.selectedDrugsQueue.push({drugId:e.form.value.drug.drugId,quantity:e.form.value.quantity}))}searchField(e){N.emit("searchDrug",e),N.on("drugSearchResult",e=>{this.drugsForSource=e})}selectDrugs(e,t){this.selectedDrugsArray.length>0&&(this.selectedDrugsArray=this.selectedDrugsArray.filter(t=>t.drugId!=e)),this.selectedDrugsArray.push({drugId:e,genericName:t})}unSelectDrug(e){this.selectedDrugsQueue=this.selectedDrugsQueue.filter(t=>t.drugId!=e),this.selectedDrugsArray=this.selectedDrugsArray.filter(t=>t.drugId!=e)}getAllSources(){N.emit("getSources"),N.on("sourceResult",e=>{this.sources=e})}ngOnInit(){this.route.params.subscribe(e=>{this.currentRoute=e.detail})}createDrug(e){return Object(a.a)(this,void 0,void 0,(function*(){if(e.invalid)return;const t=e.form.value;if(1*t.sellingPrice<1*t.costPrice)return void this._dialog.open(d.a,{data:{message:"Selling Price must be more than cost price"}});const r={amount:t.amount,brandName:t.brandName,costPrice:t.costPrice,expiryDate:t.expiryDate,genericName:t.genericName,sellingPrice:t.sellingPrice,sources:t.source,type:t.type};try{yield this.drugsService.createOneDrug(r).toPromise(),this._dialog.open(d.a,{data:{message:"Drug Created"}})}catch(c){throw c}}))}createSource(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e.form.value,r={name:t.name,address:t.address,purchaseDate:t.purchaseDate,drugs:this.selectedDrugsQueue};try{yield this.sourceService.createSource(r).toPromise(),this._dialog.open(d.a,{data:{message:"Source Created"}})}catch(c){}}))}}return e.\u0275fac=function(t){return new(t||e)(l.Nb(n.a),l.Nb(u.a),l.Nb(s.a),l.Nb(m.b))},e.\u0275cmp=l.Hb({type:e,selectors:[["app-create-detail"]],decls:4,vars:2,consts:[["class","component",4,"ngIf"],[1,"component"],[1,"header"],[1,"create_detail_card"],[1,"create_detail_card_left"],[3,"submit"],["createForm","ngForm"],["class","create_detail_card_left_input_field","appearance","outline",4,"ngFor","ngForOf"],["appearance","fill",1,"create_detail_card_left_input_field"],["ngModel","","name","type","matInput",""],["value","injectible"],["value","tablet"],["value","suspension"],["appearance","fill",1,"create_detail_card_left_input_field",3,"click"],["ngModel","","name","source","matInput",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn--crimson"],[1,"create_detail_card_verticalline"],["appearance","outline",1,"create_detail_card_left_input_field"],["min","1","matInput","","ngModel","","required","",3,"name","placeholder","type"],[3,"value"],["placeholder","Add Drug","type","text","appearance","outline","matInput","","name","drugId",3,"matAutocomplete","focus"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["class","create_detail_card_right",4,"ngIf"],["matInput","","ngModel","","required","",3,"name","placeholder","type"],[3,"value","click"],[1,"create_detail_card_right"],[1,"create_detail_card_right_selectedDrugs_header"],[1,"queue_form",3,"submit"],["form","ngForm"],["class","create_detail_card_right_selectedDrugs",4,"ngFor","ngForOf"],[1,"create_detail_card_right_selectedDrugs"],["type","hidden","name","drug",3,"ngModel"],["placeholder","1","min","1","matInput","","name","quantity","required","","ngModel","","type","number",1,"create_detail_card_right_selectedDrugs_quantity"],["type","submit",1,"btn","btn--white","addDrug_queue"],[1,"create_detail_card_right_selectedDrugs_unSelect",3,"click"]],template:function(e,t){1&e&&(l.Lc(0,D,26,2,"div",0),l.Lc(1,w,19,4,"div",0),l.Ob(2,"br"),l.Ob(3,"br")),2&e&&(l.mc("ngIf","drugs"==t.currentRoute),l.Ab(1),l.mc("ngIf","sources"==t.currentRoute))},directives:[c.n,g.t,g.m,g.n,c.m,b.c,b.f,_.a,g.l,g.o,p.f,f.a,g.b,g.r,h.c,h.a,g.p],pipes:[c.v],styles:[".create_detail_card[_ngcontent-%COMP%]{color:green;height:auto;width:65%;position:absolute;right:2rem;top:8.5rem;border-radius:1rem;margin-bottom:2rem;box-shadow:.1rem .2rem .6rem #000}.create_detail_card_verticalline[_ngcontent-%COMP%]{position:absolute;height:100%;width:.3rem;padding:0;background-color:brown;margin:0;top:0;left:50%}.create_detail_card_left[_ngcontent-%COMP%]{left:0;width:45%;margin:1rem}.create_detail_card_left_input_field[_ngcontent-%COMP%]{width:100%}.create_detail_card_right[_ngcontent-%COMP%]{right:0;width:45%;margin:-34.5rem 1rem 1rem;position:absolute;z-index:56}.create_detail_card_right_selectedDrugs[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff;border-radius:3rem;width:90%;height:3rem;margin:5% 10%;padding-left:1rem;padding-top:.5rem}.create_detail_card_right_selectedDrugs_header[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;margin-top:4rem}.create_detail_card_right_selectedDrugs_quantity[_ngcontent-%COMP%]{width:4rem;height:2rem;margin-left:1rem;border-radius:1rem;color:#dc143c;text-align:center;background-color:#fff}.create_detail_card_right_selectedDrugs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:2rem;height:.1rem;margin:0;padding:0;background-color:#000}.create_detail_card_right_selectedDrugs_unSelect[_ngcontent-%COMP%]{right:1rem;margin-top:.3rem;background:none;color:#f0f8ff;position:absolute;border:none;font-size:1.5rem}.create_detail_card_right_selectedDrugs[_ngcontent-%COMP%]:first-child{margin-top:20%}.create_detail_card_right_input_field[_ngcontent-%COMP%]{width:100%}.addDrug_queue[_ngcontent-%COMP%]{width:2.1rem;height:2.1rem;background-color:#000;text-align:center;margin:0 0 0 1.3rem;padding:0;font-size:1.85rem;color:#fff}.queue_form[_ngcontent-%COMP%]{margin:-3rem 0 0;padding:0}.header[_ngcontent-%COMP%]{text-align:center;top:5rem;text-transform:uppercase;color:#dc143c;margin-bottom:2rem;position:relative;font-size:2.75rem;left:35%;position:absolute}@media only screen and (max-width:1000px){.create_detail_card[_ngcontent-%COMP%]{color:green;height:auto;width:80%;position:absolute;right:10%;top:70%;border-radius:1rem;margin-bottom:2rem;box-shadow:.1rem .2rem .6rem #000}.create_detail_card_verticalline[_ngcontent-%COMP%]{visibility:hidden}.create_detail_card_left[_ngcontent-%COMP%]{left:0;width:90%;margin:1rem}.create_detail_card_left_input_field[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]{text-align:center;top:60%;text-transform:uppercase;width:80%;margin-left:10%;color:#dc143c;margin-bottom:2rem;position:absolute;right:5%;font-size:2rem}}"]}),e})();const C=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Hb({type:e,selectors:[["app-create"]],decls:11,vars:0,consts:[[1,"create__card"],[1,"create__card__header"],["routerLink","/create/drugs",1,"create__card__element"],[1,"create__card__element__name"],["routerLink","/create/sources",1,"create__card__element"]],template:function(e,t){1&e&&(l.Tb(0,"div",0),l.Tb(1,"div",1),l.Nc(2,"CREATE"),l.Sb(),l.Tb(3,"div",2),l.Tb(4,"div",3),l.Nc(5,"DRUG"),l.Sb(),l.Sb(),l.Tb(6,"div",4),l.Tb(7,"div",3),l.Nc(8,"SOURCES"),l.Sb(),l.Sb(),l.Ob(9,"br"),l.Sb(),l.Ob(10,"router-outlet"))},directives:[n.d,n.h],styles:[".create__card[_ngcontent-%COMP%]{left:4rem;top:7rem;height:45%;width:22.5%;background-color:beige;position:absolute;color:brown;text-align:center;border-radius:.3rem;box-shadow:.1rem .2rem .6rem #ff4500}.create__card__header[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;color:#dc143c;font-weight:400;letter-spacing:.2rem;font-size:2rem;text-transform:uppercase;text-align:center;margin:1rem auto;padding-top:1rem}.create__card__element[_ngcontent-%COMP%]{width:70%;margin:.6rem 15%;height:3rem;border-radius:.6rem;background-color:grey;z-index:3;cursor:pointer}.create__card__element__name[_ngcontent-%COMP%]{text-align:left;color:#fff;text-transform:uppercase;margin:.8rem 1rem;float:left}@media only screen and (max-width:1000px){.create__card[_ngcontent-%COMP%]{left:10%;top:7rem;height:35%;width:80%;background-color:beige;position:absolute;color:brown;text-align:center;border-radius:.3rem;box-shadow:.1rem .2rem .6rem #ff4500}.create__card__header[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;color:#dc143c;font-weight:400;letter-spacing:.2rem;font-size:1.6rem;text-transform:uppercase;text-align:center;margin:1rem auto;padding-top:1rem}}"]}),e})(),children:[{path:":detail",component:A}]}];let M=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(C)],n.g]}),e})();var x=r("rhD1");let I=(()=>{class e{}return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},imports:[[c.c,M,x.a]]}),e})()},mrSG:function(e,t,r){"use strict";function c(e,t,r,c){var n,a=arguments.length,i=a<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(i=(a<3?n(i):a>3?n(t,r,i):n(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function n(e,t,r,c){return new(r||(r=Promise))((function(n,a){function i(e){try{d(c.next(e))}catch(t){a(t)}}function o(e){try{d(c.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}d((c=c.apply(e,t||[])).next())}))}r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return n}))}}]);